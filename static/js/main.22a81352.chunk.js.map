{"version":3,"sources":["utils.ts","components/ChunkTile.tsx","components/forms/ToggleSwitch.tsx","models/Chunk.ts","components/Map.tsx","components/Modal.tsx","reportWebVitals.js","index.js"],"names":["listHasChunk","list","coords","x1","y1","find","x2","y2","ChunkTile","chunk","onClick","showCoords","tdRef","useRef","mouseDownRef","setMouseDown","d","current","moveDistanceRef","setMoveDistance","resetMouseState","mouseDownHandler","e","button","mouseUpHandler","mouseMoveHandler","a","movementX","b","movementY","Math","sqrt","useEffect","tdEl","addEventListener","className","chunkData","impossible","x","y","undefined","ref","ToggleSwitch","checked","children","onChange","type","Chunk","unlocked","this","Map","modal","useState","width","height","chunks","push","initChunks","selectedChunk","setSelectedChunk","scale","translation","view","setView","window","innerWidth","innerHeight","windowDimensions","setWindowDimensions","showSidebar","setShowSideBar","setShowCoords","open","close","minWidthScale","minHeightScale","minScale","value","translationBounds","xMax","yMax","xMin","yMin","id","cellSpacing","cellPadding","map","row","aria-label","target","Modal","modalElement","document","getElementById","forwardRef","defaultOpened","fade","isOpen","setIsOpen","useCallback","useImperativeHandle","handleEscape","event","keyCode","removeEventListener","createPortal","role","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.22a81352.chunk.js","sourcesContent":["export function listHasChunk(list: number[][], coords: number[]): boolean {\n    const [x1, y1] = coords;\n\n    return !!list.find(([x2, y2]) => x1 === x2 && y1 === y2);\n}\n","import { useEffect, useRef, useState } from 'react';\n\nimport chunkData from '../data/chunk_data.json';\nimport { listHasChunk } from '../utils';\nimport { Chunk } from '../models';\n\nconst ChunkTile: React.FC<{\n  chunk: Chunk;\n  onClick?: () => void;\n  showCoords?: boolean;\n}> = ({ chunk, onClick, showCoords = false }) => {\n  const tdRef = useRef<HTMLTableDataCellElement>(null);\n\n  // state for when the mouse left button is held down\n  const mouseDownRef = useRef(false);\n  const setMouseDown = (d: boolean) => {\n    mouseDownRef.current = d;\n  };\n\n  // state for how much the mouse has moved while the left button is held down\n  const moveDistanceRef = useRef(0);\n  const setMoveDistance = (d: number) => {\n    moveDistanceRef.current = d;\n  };\n\n  function resetMouseState() {\n    setMoveDistance(0);\n    setMouseDown(false);\n  }\n\n  function mouseDownHandler(e: MouseEvent) {\n    // if the left mouse button was pressed\n    if (e.button === 0) setMouseDown(true);\n  }\n\n  function mouseUpHandler(e: MouseEvent) {\n    // if the left mouse button was released\n    if (mouseDownRef.current && e.button === 0) {\n      // only trigger `onClick` when the user isn't moving the map\n      if (moveDistanceRef.current <= 10) {\n        onClick && onClick();\n      }\n\n      resetMouseState();\n    }\n  }\n\n  function mouseMoveHandler(e: MouseEvent) {\n    // do nothing if the left mouse button isn't held down\n    if (!mouseDownRef.current) return;\n\n    const a = e.movementX;\n    const b = e.movementY;\n\n    setMoveDistance(moveDistanceRef.current + Math.sqrt(a * a + b * b));\n  }\n\n  useEffect(() => {\n    const tdEl = tdRef.current;\n    if (!tdEl) return;\n\n    tdEl.addEventListener('mousedown', mouseDownHandler);\n    tdEl.addEventListener('mouseup', mouseUpHandler);\n\n    tdEl.addEventListener('mousemove', mouseMoveHandler);\n\n    tdEl.addEventListener('mouseenter', resetMouseState);\n    tdEl.addEventListener('mouseleave', resetMouseState);\n  }, [tdRef]);\n\n  return (\n    <td\n      className={\n        listHasChunk(chunkData.impossible, [chunk.x, chunk.y])\n          ? 'impossible'\n          : undefined\n      }\n      ref={tdRef}\n    >\n      {showCoords && (\n        <>\n          ({chunk.x}, {chunk.y})\n        </>\n      )}\n    </td>\n  );\n};\n\nexport default ChunkTile;\n","import { ChangeEventHandler, ReactNode } from 'react';\n\nconst ToggleSwitch: React.FC<{\n  checked?: boolean;\n  children: ReactNode;\n  onChange?: ChangeEventHandler<HTMLInputElement>;\n}> = ({ checked, children, onChange }) => {\n  return (\n    <label className=\"toggle-switch\">\n      <input checked={checked} type=\"checkbox\" onChange={onChange} />\n      <i />\n      {children}\n    </label>\n  );\n};\n\nexport default ToggleSwitch;\n","export default class Chunk {\n  public x: number;\n  public y: number;\n\n  public unlocked = false;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n}\n","import { useEffect, useRef, useState } from 'react';\nimport { MapInteractionCSS } from 'react-map-interaction';\n\nimport { ChunkTile, Modal } from '.';\nimport type { ModalHandle } from '.';\nimport { ToggleSwitch } from './forms';\nimport { Chunk } from '../models';\n\nfunction initChunks(width: number, height: number): Chunk[][] {\n  const chunks: Chunk[][] = [];\n\n  for (let y = 0; y < height; y++) {\n    chunks.push([]);\n\n    for (let x = 0; x < width; x++) {\n      chunks[y].push(new Chunk(x, y));\n    }\n  }\n\n  return chunks;\n}\n\nexport default function Map() {\n  const width = 43;\n  const height = 25;\n\n  const modal = useRef<ModalHandle>(null);\n\n  // chunk map\n  const [chunks] = useState(initChunks(width, height));\n  const [selectedChunk, setSelectedChunk] = useState<Chunk>();\n\n  // view and window dimensions\n  const [view, setView] = useState({ scale: 1.2, translation: { x: 0, y: 0 } });\n  const [windowDimensions, setWindowDimensions] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  // settings\n  const [showSidebar, setShowSideBar] = useState(false);\n  const [showCoords, setShowCoords] = useState(false);\n\n  // on load\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }\n\n    window.addEventListener('resize', handleResize);\n  }, []);\n\n  // when chunk is selected or deselected\n  useEffect(() => {\n    if (!modal.current) return;\n\n    if (selectedChunk) {\n      modal.current.open();\n    } else {\n      modal.current.close();\n    }\n  }, [modal, selectedChunk]);\n\n  const { scale } = view;\n\n  const minWidthScale = windowDimensions.width / (width * 192);\n  const minHeightScale = windowDimensions.height / (height * 192);\n\n  const minScale =\n    minWidthScale > minHeightScale ? minWidthScale : minHeightScale;\n\n  return (\n    <>\n      <MapInteractionCSS\n        value={view}\n        onChange={setView}\n        translationBounds={{\n          xMax: 0,\n          yMax: 0,\n          xMin: -(width * 192 * scale) + windowDimensions.width,\n          yMin: -(height * 192 * scale) + windowDimensions.height,\n        }}\n        minScale={minScale}\n      >\n        <table\n          id=\"map\"\n          cellSpacing={0}\n          cellPadding={0}\n          className={scale > 1 ? 'zoomed-in' : ''}\n        >\n          <tbody>\n            {chunks.map((row, y) => (\n              <tr key={`row-${y}`}>\n                {row.map((chunk, x) => (\n                  <ChunkTile\n                    chunk={chunk}\n                    onClick={() => setSelectedChunk(chunk)}\n                    showCoords={showCoords}\n                    key={`chunk-${x}-${y}`}\n                  />\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </MapInteractionCSS>\n\n      <div className=\"controls pin-top-left\">\n        {showSidebar ? (\n          <div id=\"sidebar\">\n            <div className=\"controls pin-top-right\">\n              <button\n                onClick={() => setShowSideBar(false)}\n                aria-label=\"Hide sidebar\"\n              >\n                &lt;\n              </button>\n            </div>\n\n            <form>\n              <ToggleSwitch\n                checked={showCoords}\n                onChange={(e) => setShowCoords(e.target.checked)}\n              >\n                Show Chunk Coords\n              </ToggleSwitch>\n            </form>\n          </div>\n        ) : (\n          <button\n            onClick={() => setShowSideBar(true)}\n            aria-label=\"Show sidebar\"\n          >\n            &gt;\n          </button>\n        )}\n      </div>\n\n      <div className=\"controls pin-bottom-right margin\">\n        <button\n          onClick={() =>\n            setView({ scale: minScale, translation: { x: 0, y: 0 } })\n          }\n        >\n          zoom out\n        </button>\n      </div>\n\n      <Modal ref={modal}>\n        <div id=\"chunk-modal\">\n          <h1>\n            Chunk ({selectedChunk?.x}, {selectedChunk?.y})\n          </h1>\n        </div>\n      </Modal>\n    </>\n  );\n}\n","import {\n  forwardRef,\n  ReactNode,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useState,\n} from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalElement = document.getElementById('modal-root') as Element;\n\nexport type ModalHandle = { close: () => void; open: () => void };\n\nexport default forwardRef<\n  ModalHandle,\n  { children: ReactNode; defaultOpened?: boolean; fade?: boolean }\n>(({ children, defaultOpened = false, fade = false }, ref) => {\n  const [isOpen, setIsOpen] = useState(defaultOpened);\n\n  const close = useCallback(() => setIsOpen(false), []);\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      open: () => setIsOpen(true),\n      close,\n    }),\n    [close]\n  );\n\n  const handleEscape = useCallback(\n    (event) => {\n      if (event.keyCode === 27) close();\n    },\n    [close]\n  );\n\n  useEffect(() => {\n    if (isOpen) document.addEventListener('keydown', handleEscape, false);\n    return () => {\n      document.removeEventListener('keydown', handleEscape, false);\n    };\n  }, [handleEscape, isOpen]);\n\n  return createPortal(\n    isOpen ? (\n      <div className={`modal ${fade ? 'modal-fade' : ''}`}>\n        <div className=\"modal-overlay\" onClick={close} />\n        <span\n          role=\"button\"\n          className=\"modal-close\"\n          aria-label=\"close\"\n          onClick={close}\n        >\n          x\n        </span>\n        <div className=\"modal-body\">{children}</div>\n      </div>\n    ) : null,\n    modalElement\n  );\n});\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Map } from './components';\nimport reportWebVitals from './reportWebVitals';\n\nimport './Styles.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Map />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}